<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HubSpot Formular Test</title>
</head>
<body>
  <h1>Formular-Test-Bildungsprodukt</h1>
  
  <!-- Hier wird das Formular erscheinen -->
  <div id="form-container"></div>
  
  <!-- Original HubSpot Embedding-Code -->
  <script charset="utf-8" type="text/javascript" src="//js-eu1.hsforms.net/forms/embed/v2.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      hbspt.forms.create({
        region: "eu1",
        portalId: "26459032",
        formId: "c744833f-5a18-42bb-bcef-849296aa33b0",
        target: "#form-container",  // Hier das Ziel-Element angeben
        onFormReady: function($form) {
          console.log("Formular wurde geladen");
          
          // URL-Slug extrahieren
          const path = window.location.pathname;
          const slug = path.split('/').filter(Boolean).pop() || '';
          console.log("Extrahierter Slug:", slug);
          
          // Warten Sie kurz, um sicherzustellen, dass alle Formularelemente geladen sind
          setTimeout(function() {
            // Überprüfen, ob das Hidden Field existiert
            const hiddenField = $form.find('input[name="kurs_slug"]');
            if (hiddenField.length) {
              hiddenField.val(slug);
              console.log("Hidden Field aktualisiert mit:", slug);
            } else {
              console.log("Hinweis: Hidden Field 'kurs_slug' nicht gefunden. Stellen Sie sicher, dass es in HubSpot existiert.");
            }
          }, 500);
        }
      });
    });
  </script>
</body>
</html>
