<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HubSpot Formular Test</title>
</head>
<body>
  <h1>Formular-Test-Bildungsprodukt 3</h1>
  
  <!-- Hier wird das Formular erscheinen -->
  <div id="form-container"></div>
  
  <!-- HubSpot Embedding-Code -->
  <script charset="utf-8" type="text/javascript" src="//js-eu1.hsforms.net/forms/embed/v2.js"></script>
  <script>
    // URL-Slug extrahieren
    const path = window.location.pathname;
    const slug = path.split('/').filter(Boolean).pop() || 'default-slug';
    console.log("Extrahierter Slug:", slug);
    
    document.addEventListener('DOMContentLoaded', function() {
      // Formular mit vorbefülltem kurs_slug erstellen
      hbspt.forms.create({
        region: "eu1",
        portalId: "26459032",
        formId: "c744833f-5a18-42bb-bcef-849296aa33b0",
        target: "#form-container",
        
        // Vorbefüllung über die offizielle HubSpot API
        // Wir nutzen den exakten Feldnamen aus dem Screenshot
        prefillFields: {
          'kurs_slug': slug
        },
        
        onFormReady: function($form) {
          console.log("Formular wurde geladen");
          
          // Als Backup versuchen wir auch, das Feld direkt zu befüllen
          setTimeout(function() {
            // Exakter Selektor basierend auf dem Screenshot
            const kursSlugField = $form.find('input[name="kurs_slug"]');
            if (kursSlugField.length) {
              kursSlugField.val(slug);
              console.log("kurs_slug-Feld direkt befüllt mit:", slug);
            } else {
              console.log("kurs_slug-Feld konnte nicht direkt gefunden werden");
            }
          }, 1000);
        }
      });
    });
  </script>
</body>
</html>
